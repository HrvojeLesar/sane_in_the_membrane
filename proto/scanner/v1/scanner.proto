syntax = "proto3";

package scanner.v1;

service ScannerService {
  rpc GetScanners(GetScannersRequest) returns (GetScannersResponse) {}
  rpc Scan(ScanRequest) returns (stream ScanResponse) {}
  rpc RefreshScanners(RefreshScannersRequest) returns (RefreshScannersResponse) {}
}

message ScannerInfo {
  string name = 1;
  optional string vendor = 2;
  optional string model = 3;
  optional string type = 4;
}

message ScanResponseData {
  bytes raw_bytes = 1;
}

message ScanParameters {
  int64 format = 1;
  bool last_frame = 2;
  int64 bytes_per_line = 3;
  int64 pixels_per_line = 4;
  int64 lines = 5;
  int64 depth = 6;
}

message GetScannersRequest {}
message GetScannersResponse {
  repeated ScannerInfo scanners = 1;
}

message ScanRequest {
  string scanner_name = 1;
}
message ScanResponse {
  string scanner_name = 1;
  optional ScanResponseData data = 2;
  optional ScanParameters parameters = 3;
}

message RefreshScannersRequest {}
message RefreshScannersResponse {}
